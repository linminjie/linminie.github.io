<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 380">
  <defs>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0EA5E9"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#A3CD39"/>
    </marker>
    <marker id="arrow-gray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6B7280"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="380" fill="#F9FAFB" rx="12"/>

  <!-- Column headers -->
  <rect x="70" y="20" width="80" height="30" rx="6" fill="#E0F2FE" stroke="#0EA5E9" stroke-width="2"/>
  <text x="110" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#0369A1">Client</text>

  <rect x="250" y="20" width="100" height="30" rx="6" fill="#E5F0C6" stroke="#A3CD39" stroke-width="2"/>
  <text x="300" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#4D7C0F">mimOE Runtime</text>

  <rect x="460" y="20" width="80" height="30" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="500" y="40" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#B45309">mim</text>

  <!-- Lifelines -->
  <line x1="110" y1="50" x2="110" y2="350" stroke="#0EA5E9" stroke-width="1.5" stroke-dasharray="4,3"/>
  <line x1="300" y1="50" x2="300" y2="350" stroke="#A3CD39" stroke-width="1.5" stroke-dasharray="4,3"/>
  <line x1="500" y1="50" x2="500" y2="350" stroke="#F59E0B" stroke-width="1.5" stroke-dasharray="4,3"/>

  <!-- Step 1: HTTP Request -->
  <line x1="115" y1="80" x2="290" y2="80" stroke="#0EA5E9" stroke-width="2" marker-end="url(#arrow-blue)"/>
  <text x="200" y="73" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#0369A1">HTTP Request</text>

  <!-- Step 2: Instantiate mim (note) -->
  <rect x="310" y="95" width="90" height="25" rx="4" fill="#FEF9C3" stroke="#EAB308" stroke-width="1"/>
  <text x="355" y="112" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#854D0E">Instantiate mim</text>

  <!-- Step 3: Initialize -->
  <line x1="305" y1="135" x2="490" y2="135" stroke="#A3CD39" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="395" y="128" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#4D7C0F">Initialize (inject context)</text>

  <!-- Step 4: Handle request (self-loop) -->
  <path d="M 505 165 L 540 165 L 540 195 L 505 195" fill="none" stroke="#F59E0B" stroke-width="2" marker-end="url(#arrow-gray)"/>
  <text x="555" y="183" text-anchor="start" font-family="system-ui, sans-serif" font-size="9" fill="#B45309">Handle</text>
  <text x="555" y="195" text-anchor="start" font-family="system-ui, sans-serif" font-size="9" fill="#B45309">request</text>

  <!-- Step 5: Return response -->
  <line x1="495" y1="220" x2="310" y2="220" stroke="#6B7280" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow-gray)"/>
  <text x="400" y="213" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280">Return response</text>

  <!-- Step 6: Terminate mim (note) -->
  <rect x="310" y="240" width="90" height="25" rx="4" fill="#FEF9C3" stroke="#EAB308" stroke-width="1"/>
  <text x="355" y="257" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#854D0E">Terminate mim</text>

  <!-- Step 7: Release memory (note) -->
  <rect x="310" y="275" width="90" height="25" rx="4" fill="#FEF9C3" stroke="#EAB308" stroke-width="1"/>
  <text x="355" y="292" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#854D0E">Release memory</text>

  <!-- Step 8: HTTP Response -->
  <line x1="295" y1="320" x2="120" y2="320" stroke="#6B7280" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrow-gray)"/>
  <text x="205" y="335" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280">HTTP Response</text>
</svg>
