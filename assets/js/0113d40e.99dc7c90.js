"use strict";(globalThis.webpackChunkmimoe_devportal=globalThis.webpackChunkmimoe_devportal||[]).push([[6623],{5028(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"api/account-association","title":"Account Association API","description":"JSON-RPC 2.0 API reference for mimOE node identity, tokens, and account association","source":"@site/docs/api/account-association.md","sourceDirName":"api","slug":"/api/account-association","permalink":"/webdemo/docs/api/account-association","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Account Association API","description":"JSON-RPC 2.0 API reference for mimOE node identity, tokens, and account association"},"sidebar":"apiSidebar","previous":{"title":"Insight API","permalink":"/webdemo/docs/api/insight"},"next":{"title":"MCM API","permalink":"/webdemo/docs/api/mcm"}}');var r=s(4848),d=s(8453);const t={sidebar_position:3,title:"Account Association API",description:"JSON-RPC 2.0 API reference for mimOE node identity, tokens, and account association"},c="Account Association API",o={},l=[{value:"Endpoint",id:"endpoint",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Overview",id:"overview",level:2},{value:"getMe",id:"getme",level:3},{value:"getEdgeIdToken",id:"getedgeidtoken",level:3},{value:"associateAccount",id:"associateaccount",level:3},{value:"Error Codes",id:"error-codes",level:2},{value:"Related",id:"related",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"account-association-api",children:"Account Association API"})}),"\n",(0,r.jsx)(n.p,{children:"JSON-RPC 2.0 interface for managing node identity, tokens, and account association."}),"\n",(0,r.jsx)(n.admonition,{title:"Prerequisites",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ACCOUNT_API_KEY"}),": Found in ",(0,r.jsx)(n.code,{children:"mimoe-api-key.env"})," in your working directory. mimOE auto-generates this file on first startup. See ",(0,r.jsx)(n.a,{href:"/webdemo/docs/api/mcm#api-key-file",children:"MCM API: API Key File"})," for details."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Developer account"})," (for ",(0,r.jsx)(n.code,{children:"associateAccount"}),"): ",(0,r.jsx)(n.a,{href:"https://console.mimik.com/login",children:"Sign up and log in"})," to get your Client ID and Developer ID Token."]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /jsonrpc/v1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["All requests use ",(0,r.jsx)(n.code,{children:"Content-Type: application/json"})," and follow the JSON-RPC 2.0 format."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Request format"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "method": "methodName",\n  "params": [],\n  "id": 1\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Success response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": { }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "error": {\n    "code": -32600,\n    "message": "Invalid Request"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(n.p,{children:"This API uses two authentication mechanisms, depending on the method:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ACCOUNT_API_KEY"}),": Found in the API key file (",(0,r.jsx)(n.code,{children:"mimoe-api-key.env"}),"). Pass the key in the ",(0,r.jsx)(n.code,{children:"Authorization"})," header as a bearer token. See ",(0,r.jsx)(n.a,{href:"/webdemo/docs/api/mcm#api-key-file",children:"MCM API: API Key File"})," for details."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Authorization: Bearer <ACCOUNT_API_KEY>\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Edge access token"}),": A JWT obtained through the ",(0,r.jsx)(n.a,{href:"/webdemo/docs/platform/getting-started/account-association-guide",children:"account association flow"}),". When required, pass the token as the first element in ",(0,r.jsx)(n.code,{children:"params"}),". Some methods require specific token scopes."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"Auth"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#getme",children:(0,r.jsx)(n.code,{children:"getMe"})})}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Returns node metadata"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#getedgeidtoken",children:(0,r.jsx)(n.code,{children:"getEdgeIdToken"})})}),(0,r.jsx)(n.td,{children:"ACCOUNT_API_KEY (bearer)"}),(0,r.jsx)(n.td,{children:"Returns a JWT identity token for the node"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#associateaccount",children:(0,r.jsx)(n.code,{children:"associateAccount"})})}),(0,r.jsxs)(n.td,{children:["ACCOUNT_API_KEY (bearer) + Edge token (",(0,r.jsx)(n.code,{children:"edge:account:associate"}),")"]}),(0,r.jsx)(n.td,{children:"Links a developer account to the node"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"getme",children:"getMe"}),"\n",(0,r.jsx)(n.p,{children:"Returns metadata about the local mimOE node. No authentication required."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,r.jsx)(n.p,{children:"None."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example request"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8083/jsonrpc/v1" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"jsonrpc": "2.0", "method": "getMe", "params": [], "id": 1}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "accountId": "abc123-account-id",\n    "nodeId": "def456-node-id",\n    "nodeName": "My Device",\n    "version": "3.0.0"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error cases"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Message"}),(0,r.jsx)(n.th,{children:"Cause"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32603"}),(0,r.jsx)(n.td,{children:"Internal error"}),(0,r.jsx)(n.td,{children:"Runtime is not ready"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"getedgeidtoken",children:"getEdgeIdToken"}),"\n",(0,r.jsxs)(n.p,{children:["Returns a signed JWT identity token for the node. This token is used in the ",(0,r.jsx)(n.a,{href:"/webdemo/docs/platform/getting-started/account-association-guide#step-1-get-edge-id-token",children:"account association flow"})," to exchange for an access token."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Authentication"})}),"\n",(0,r.jsxs)(n.p,{children:["Requires ",(0,r.jsx)(n.code,{children:"ACCOUNT_API_KEY"})," as bearer token in the ",(0,r.jsx)(n.code,{children:"Authorization"})," header."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,r.jsx)(n.p,{children:"None."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Token claims"})}),"\n",(0,r.jsx)(n.p,{children:"The returned JWT contains these claims:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Claim"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sub"})}),(0,r.jsx)(n.td,{children:"Node identifier"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"iss"})}),(0,r.jsx)(n.td,{children:"Issuer (mimOE runtime)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"iat"})}),(0,r.jsx)(n.td,{children:"Issued at (Unix timestamp)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"exp"})}),(0,r.jsx)(n.td,{children:"Expiration (Unix timestamp)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"node_id"})}),(0,r.jsx)(n.td,{children:"Node unique identifier"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example request"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8083/jsonrpc/v1" \\\n  -H "Authorization: Bearer $ACCOUNT_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"jsonrpc": "2.0", "method": "getEdgeIdToken", "params": [], "id": 1}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "id_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error cases"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Message"}),(0,r.jsx)(n.th,{children:"Cause"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32602"}),(0,r.jsx)(n.td,{children:"Invalid params"}),(0,r.jsx)(n.td,{children:"ACCOUNT_API_KEY is missing or invalid"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32603"}),(0,r.jsx)(n.td,{children:"Internal error"}),(0,r.jsx)(n.td,{children:"Token generation failed"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"associateaccount",children:"associateAccount"}),"\n",(0,r.jsx)(n.p,{children:"Links a developer account to the local mimOE node. This is required for continuum features like Account-Based Discovery and Proximity Discovery."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Authentication"})}),"\n",(0,r.jsxs)(n.p,{children:["Requires ",(0,r.jsx)(n.code,{children:"ACCOUNT_API_KEY"})," as bearer token in the ",(0,r.jsx)(n.code,{children:"Authorization"})," header."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Index"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"0"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsxs)(n.td,{children:["Edge access token (with ",(0,r.jsx)(n.code,{children:"edge:account:associate"})," scope)"]})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example request"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8083/jsonrpc/v1" \\\n  -H "Authorization: Bearer $ACCOUNT_API_KEY" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "jsonrpc": "2.0",\n    "method": "associateAccount",\n    "params": ["ACCESS_TOKEN"],\n    "id": 1\n  }\'\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example response"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "status": "successfully associated"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Error cases"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Message"}),(0,r.jsx)(n.th,{children:"Cause"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32602"}),(0,r.jsx)(n.td,{children:"Invalid params"}),(0,r.jsx)(n.td,{children:"Missing or malformed access token"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32600"}),(0,r.jsx)(n.td,{children:"Invalid Request"}),(0,r.jsxs)(n.td,{children:["Token lacks ",(0,r.jsx)(n.code,{children:"edge:account:associate"})," scope"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32603"}),(0,r.jsx)(n.td,{children:"Internal error"}),(0,r.jsx)(n.td,{children:"Association failed (network or runtime error)"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"error-codes",children:"Error Codes"}),"\n",(0,r.jsx)(n.p,{children:"Standard JSON-RPC 2.0 error codes:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Code"}),(0,r.jsx)(n.th,{children:"Message"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32700"}),(0,r.jsx)(n.td,{children:"Parse error"}),(0,r.jsx)(n.td,{children:"Invalid JSON"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32600"}),(0,r.jsx)(n.td,{children:"Invalid Request"}),(0,r.jsx)(n.td,{children:"Not a valid JSON-RPC 2.0 request"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32601"}),(0,r.jsx)(n.td,{children:"Method not found"}),(0,r.jsx)(n.td,{children:"Method does not exist"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32602"}),(0,r.jsx)(n.td,{children:"Invalid params"}),(0,r.jsx)(n.td,{children:"Invalid method parameters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"-32603"}),(0,r.jsx)(n.td,{children:"Internal error"}),(0,r.jsx)(n.td,{children:"Internal runtime error"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/webdemo/docs/platform/getting-started/account-association-guide",children:"Account Association Guide"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/webdemo/docs/api/mcm",children:"MCM API"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/webdemo/docs/api/insight",children:"Insight API"})}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>c});var i=s(6540);const r={},d=i.createContext(r);function t(e){const n=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);