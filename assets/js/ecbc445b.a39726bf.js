"use strict";(globalThis.webpackChunkmimoe_devportal=globalThis.webpackChunkmimoe_devportal||[]).push([[499],{8453(e,n,i){i.d(n,{R:()=>o,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},9354(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"mesh-foundation/discovery/tunneling","title":"Tunneling Service","description":"Enable communication between nodes on different networks","source":"@site/docs/mesh-foundation/discovery/tunneling.md","sourceDirName":"mesh-foundation/discovery","slug":"/mesh-foundation/discovery/tunneling","permalink":"/webdemo/docs/mesh-foundation/discovery/tunneling","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Tunneling Service","description":"Enable communication between nodes on different networks"},"sidebar":"meshFoundationSidebar","previous":{"title":"Proximity Discovery","permalink":"/webdemo/docs/mesh-foundation/discovery/proximity"}}');var t=i(4848),r=i(8453);const o={sidebar_position:6,title:"Tunneling Service",description:"Enable communication between nodes on different networks"},l="Tunneling Service",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Overview",id:"overview",level:2},{value:"Why Tunneling is Needed",id:"why-tunneling-is-needed",level:2},{value:"Tunnel Architecture",id:"tunnel-architecture",level:2},{value:"SEP (Signaling Endpoint)",id:"sep-signaling-endpoint",level:3},{value:"BEP (Bearer Endpoint)",id:"bep-bearer-endpoint",level:3},{value:"Typical Request Flow",id:"typical-request-flow",level:3},{value:"API Usage",id:"api-usage",level:2},{value:"Step 1: Store a JWT",id:"step-1-store-a-jwt",level:3},{value:"Step 2: Get SEP Info",id:"step-2-get-sep-info",level:3},{value:"Step 3: Call a Remote Node",id:"step-3-call-a-remote-node",level:3},{value:"Current Capabilities",id:"current-capabilities",level:2},{value:"Limitations",id:"limitations",level:2},{value:"When Tunneling is Used",id:"when-tunneling-is-used",level:2},{value:"Security",id:"security",level:2},{value:"Related",id:"related",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"tunneling-service",children:"Tunneling Service"})}),"\n",(0,t.jsx)(n.p,{children:"The Tunneling Service enables nodes to communicate across different networks, even when behind NAT/firewalls. This is essential for Account-Based and Proximity Discovery, where nodes on different networks need to reach each other."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.p,{children:"Tunneling requires a developer account and account association:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/platform/getting-started/developer-console",children:"Developer Console"})}),": Create a project and get your Client ID and Developer ID Token"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/docs/platform/getting-started/account-association-guide",children:"Account Association"})}),": Associate your mimOE node with your developer account to obtain an access token"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The access token from account association is what you store via ",(0,t.jsx)(n.code,{children:"PUT /token"})," in the API usage below."]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Attribute"}),(0,t.jsx)(n.th,{children:"Value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Purpose"})}),(0,t.jsx)(n.td,{children:"NAT traversal for cross-network communication"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Cloud dependency"})}),(0,t.jsx)(n.td,{children:"Requires mSS (mimik Signaling Service)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Connection"})}),(0,t.jsx)(n.td,{children:"Outbound HTTPS to tunnel service"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Capabilities"})}),(0,t.jsx)(n.td,{children:"HTTP RESTful APIs only"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Protocol"})}),(0,t.jsx)(n.td,{children:"Request/response relay"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"why-tunneling-is-needed",children:"Why Tunneling is Needed"}),"\n",(0,t.jsx)(n.p,{children:"Most nodes are behind NAT/firewalls:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Nodes have private IP addresses (192.168.x.x, 10.x.x.x)"}),"\n",(0,t.jsx)(n.li,{children:"Routers block inbound connections by default"}),"\n",(0,t.jsx)(n.li,{children:"External nodes cannot directly reach internal nodes"}),"\n",(0,t.jsx)(n.li,{children:"Opening firewall ports is often not possible on mobile or corporate networks"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Tunneling Service solves this by reversing the connection direction: nodes maintain outbound connections to the tunnel service, which relays incoming requests through those connections."}),"\n",(0,t.jsx)(n.h2,{id:"tunnel-architecture",children:"Tunnel Architecture"}),"\n",(0,t.jsx)(n.p,{children:"mimOE provides two types of tunnels for optimized cross-network communication."}),"\n",(0,t.jsx)(n.h3,{id:"sep-signaling-endpoint",children:"SEP (Signaling Endpoint)"}),"\n",(0,t.jsx)(n.p,{children:"SEP is established on a proxy node selected by the supernode (typically the supernode itself). Instead of each node in the local mesh establishing its own tunnel, a single SEP enables all local nodes to be reachable from outside the network."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"One tunnel serves the entire local mesh"}),"\n",(0,t.jsx)(n.li,{children:"Reduces overhead by eliminating per-node tunnel establishment"}),"\n",(0,t.jsx)(n.li,{children:"Proxy node routes requests to the appropriate local node"}),"\n",(0,t.jsx)(n.li,{children:"Optimization unique to mimOE architecture"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"bep-bearer-endpoint",children:"BEP (Bearer Endpoint)"}),"\n",(0,t.jsx)(n.p,{children:"When a particular node requires high-volume communication, a mim can request a BEP (a direct tunnel that bypasses the SEP entirely)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Established on-demand for heavy communication scenarios"}),"\n",(0,t.jsx)(n.li,{children:"Direct connection between specific nodes"}),"\n",(0,t.jsx)(n.li,{children:"Avoids routing through the proxy node"}),"\n",(0,t.jsx)(n.li,{children:"Better performance for sustained traffic"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"typical-request-flow",children:"Typical Request Flow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"A requesting mim discovers another mim on a different network via discovery service"}),"\n",(0,t.jsx)(n.li,{children:"The requesting mim uses SEP to reach the target mim through the proxy node"}),"\n",(0,t.jsx)(n.li,{children:"The requesting mim authenticates with the target mim"}),"\n",(0,t.jsx)(n.li,{children:"For heavy traffic, the requesting mim asks the target mim to establish a BEP"}),"\n",(0,t.jsx)(n.li,{children:"Subsequent communication uses BEP directly"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"api-usage",children:"API Usage"}),"\n",(0,t.jsxs)(n.p,{children:["Tunneling uses the ",(0,t.jsx)(n.a,{href:"/docs/api/insight",children:"Insight API"})," to get the SEP routing information, then includes routing headers when calling a remote node."]}),"\n",(0,t.jsx)(n.h3,{id:"step-1-store-a-jwt",children:"Step 1: Store a JWT"}),"\n",(0,t.jsx)(n.p,{children:"Tunneling requires an account-scoped token:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X PUT "http://localhost:8083/mimik-mesh/insight/v1/token" \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer $API_KEY" \\\n  -d \'{\n    "token": "eyJhbGciOiJSUzI1NiIs...",\n    "expiresAt": 1729677600\n  }\'\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-get-sep-info",children:"Step 2: Get SEP Info"}),"\n",(0,t.jsx)(n.p,{children:"Retrieve the service endpoint for cross-network routing:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X GET "http://localhost:8083/mimik-mesh/insight/v1/info?types=sep" \\\n  -H "Authorization: Bearer $API_KEY"\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response (200 OK)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "data": {\n    "sep": {\n      "nodeId": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",\n      "url": "https://sep.mimik.com",\n      "headers": {\n        "x-mimik-port": "8083",\n        "x-mimik-routing": "a1b2c3d4-e5f6-7890-abcd-ef1234567890"\n      },\n      "status": "available"\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-call-a-remote-node",children:"Step 3: Call a Remote Node"}),"\n",(0,t.jsxs)(n.p,{children:["Use the SEP ",(0,t.jsx)(n.code,{children:"url"})," as the base and include the routing headers to reach a mim on the remote node:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X GET "https://sep.mimik.com/my-agent/v1/data" \\\n  -H "Authorization: Bearer $API_KEY" \\\n  -H "x-mimik-port: 8083" \\\n  -H "x-mimik-routing: a1b2c3d4-e5f6-7890-abcd-ef1234567890"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This routes the request through the mimik cloud relay to the target node, where it is forwarded to the local mim at ",(0,t.jsx)(n.code,{children:"/my-agent/v1/data"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/docs/api/insight#tunneling-via-sep",children:"Insight API reference"})," for full details."]}),"\n",(0,t.jsx)(n.h2,{id:"current-capabilities",children:"Current Capabilities"}),"\n",(0,t.jsx)(n.p,{children:"The Tunneling Service currently supports HTTP RESTful API requests only:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All standard HTTP methods (GET, POST, PUT, DELETE, PATCH)"}),"\n",(0,t.jsx)(n.li,{children:"Request and response headers preserved"}),"\n",(0,t.jsx)(n.li,{children:"JSON, form data, and binary payloads"}),"\n",(0,t.jsx)(n.li,{children:"Configurable request timeouts"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"limitations",children:"Limitations"}),"\n",(0,t.jsxs)(n.p,{children:["The following are ",(0,t.jsx)(n.strong,{children:"not currently supported"})," for tunneled connections:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"WebSocket connections"}),"\n",(0,t.jsx)(n.li,{children:"Server-Sent Events (SSE)"}),"\n",(0,t.jsx)(n.li,{children:"Streaming responses"}),"\n",(0,t.jsx)(n.li,{children:"Long-lived connections beyond request timeout"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For applications requiring WebSocket or streaming, nodes must be on the same network using ",(0,t.jsx)(n.a,{href:"/webdemo/docs/mesh-foundation/discovery/link-local",children:"Link Local Discovery"}),", which supports full HTTP, WebSocket, and SSE capabilities."]}),"\n",(0,t.jsx)(n.h2,{id:"when-tunneling-is-used",children:"When Tunneling is Used"}),"\n",(0,t.jsx)(n.p,{children:"The mDS (mimik Discovery Service) determines whether tunneling is required based on network topology. When a local mesh has no reachable public IP, mDS assigns a SEP as a proxy node, selected by the supernode, to facilitate communication."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Connection"}),(0,t.jsx)(n.th,{children:"How it works"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Same network (Link Local)"}),(0,t.jsx)(n.td,{children:"Direct"}),(0,t.jsx)(n.td,{children:"Nodes reach each other directly via local network"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Different networks, no public IP"}),(0,t.jsx)(n.td,{children:"Tunneled"}),(0,t.jsx)(n.td,{children:"mDS detects NAT and assigns SEP proxy"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Node has public IP"}),(0,t.jsx)(n.td,{children:"Direct"}),(0,t.jsx)(n.td,{children:"mDS determines direct connection is possible"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transport encryption:"})," All tunnel connections use TLS (HTTPS)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Node authentication:"})," Only registered nodes can establish tunnels"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Request authentication:"})," Requests include signed tokens"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Account isolation:"})," Cross-account tunneling only for public services"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/webdemo/docs/mesh-foundation/discovery/link-local",children:"Link Local Discovery"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/webdemo/docs/mesh-foundation/discovery/account-based",children:"Account-Based Discovery"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/webdemo/docs/mesh-foundation/discovery/proximity",children:"Proximity Discovery"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);